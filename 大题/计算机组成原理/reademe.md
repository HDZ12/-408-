![image](https://github.com/user-attachments/assets/cc1dfba1-7991-459b-9b31-62d99887a171)[2011统考真题]
假定在一个8位字长的计算机中运行如下C程序段：
```C++
unsigned int x = 134;
unsigned int y = 264;
int m=x;
int n=y;
unsigned int z1=x-y;
unsigned int z2=x+y;
int k1=m-n;
int k2=m+n;
```
若编译器编译时将8个8位寄存器R1~R8分别分配给变量X,y,m,n,z1,z2,k1和k2.
请回答下列问题（提示：有符号整数用补码表示）。

1.  执行上述程序段后，寄存器R1、R5和R6的内容分别是什么（用十六进制表示）

**考察知识点**：无符号数计算 unsigned int->无符号数,无难度，注意计算

$R1: x=134=2^7+2^2+2=1000  0110=86H$

$y=246=255-9=2^8-1-2^3-1=1111 0110$

$R5: z1= x - y =1000 0110-1111 0110 = 1001 0000=90H$(注意点无符号数减法借位)

$R6:z2= x + y=1000 0110 +1111 0110= 0111 1100=7CH$

2. 执行上述程序段后，变量m和k1的值分别是多少（用十进制表示）？

**考察知识点**： 有符号数计算，无符号数变为有符号数，有符号数在计算机中存储方式为补码

$m= 1000 0110 -> 1111 1001+1=1111 1010=-(127-5)=-122$

$[k1]_补=m-n=[m]_补+[-n]_补= 1000 0110 + 0000 1001 +1=1000 0110 + 0000 1010= 1001 0000$

$k1=1111 0000= -112 $

3. 上述程序段涉及有符号整数加减、无符号整数加减运算，这四种运算能否利用同一个加法器辅助电路实现？简述理由。

答：能，n位加法器实现的是模 $2^n$ 无符号整数加法运算，对于无符号数 a,b a+b直接实现，a-b用a加b的补数实现
 $a-b=a+[-b]_补(mod 2^n)$,带符号整数用补码表示，补码加减运算公式为 $[a]_补+[b]_补(mod 2^n),[a]_补+[-b]_补(mod 2^n)$
 所以都可以实现。

 4. **计算机内部**如何判断有符号整数加减运算的结果是否发生溢出？上述程序段中，哪
些有符号整数运算语句的执行结果会发生溢出？
加法器两各输入端符号相同，且不同于输出端，或次高位与最高位的进位不同，溢出的是k2。

[2012年真题]某`16位`计算机中，有符号整数用`补码`表示，数据Cache和指令Cache
分离。下表给出了指令系统中的部分指令格式，其中Rs和Rd表示寄存器，mcm表示
存储单元地址，(X)表示寄存器X或存储单元X的内容。


![1725068136450](https://github.com/user-attachments/assets/71d6dbda-7d67-470d-9721-ee4337082be3)

该计算机采用5段流水方式执行指令，各流水段分别是取指(F)译码/读寄存器(D)、
执行/计算有效地址(EX)、访问存储器(M)和结果写回寄存器(WB),流水线采用“按
序发射，按序完成”方式，未采用转发技术处理数据相关，且同一寄存器的读和写操作
不能在同一个时钟周期内进行。请回答下列问题：

1. 若int型变量x的值为-513，存放在寄存器R1中，则执行“SHR R1”后，R1中的
内容是多少（用十六进制表示）？

根据表格可知 SHR R1为算数右移，

$-513=-(2^9+1)=1111 1110 0000 0001->1111 1101 1111 1110+1->1111 1101 1111 1111->算数右移->1111 1110 1111 1111->FEFFH$

2. 若在某个时间段中，有连续的4条指今进入流水线，在其执行过程中**未发生任何阻
塞**，则执行这4条指令所需的时钟周期数为多少？

$T=5t+(4-1)*t=8t$

3. 若高级语言程序中某赋值语句为x=a+b,x、a和b均为int型变量，它们的存储单
元地址分别表示为[x]、[a]和[b]。该语句对应的指令序列及其在指令流中的执行过程
如下所示

```c++
I1 LOAD R1,[a]
I2 LOAD R2,[b]
I3 ADD R1,R2
I4 STORE R2,[x]
```

![1725069147046](https://github.com/user-attachments/assets/88b4b75b-76b7-4d77-8878-8143fb0af6ce)

则这4条指令执行过程中I3的ID段和I4的iF段被阻塞的原因各是什么？

I3中的ID段被阻塞的原因是因为I3和I1和I2都存在数据相关，需等到I1和I2把结果谢晖寄存器，I3才能读寄存器中的内容，所以被阻塞，I4中的IF是因为前一条I3在ID被阻塞，所以I4的IF被阻塞，否则，会覆盖指令寄存器，导致I3译码错误。

4. 若高级语言程序中某赋值语句为x=x*2+a,x和a均为unsigned int类型的变量，它
们的存储单元地址分别表示为[x],[a],则执行这条语句至少需要多少个时钟周期？要
求模仿上图画出这条语句对应的指今序列及其在流水线中的执行过程示意图

``` C++
I1 LOAD R1, [x]
I2 LOAD R2, [a]
I3 SHL  R1
I4 ADD  R1,R2
I5 STORE R2, [X]
```


| 时钟 指令 | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10  | 11  | 12  | 13  | 14  | 15  | 16  | 17  |
| ----- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| I1    | IF  | ID  | EX  | M   | WB  |     |     |     |     |     |     |     |     |     |     |     |     |
| I2    |     | IF  | ID  | EX  | M   | WB  |     |     |     |     |     |     |     |     |     |     |     |
| I3    |     |     | IF  |     |     | ID  | EX  | M   | WB  |     |     |     |     |     |     |     |     |
| I4    |     |     |     |     |     | IF  |     |     |     | ID  | EX  | M   | WB  |     |     |     |     |
| I5    |     |     |     |     |     |     |     |     |     | IF  |     |     |     | ID  | EX  | M   | WB  |



